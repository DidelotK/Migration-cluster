---
# Playbook for K3s core installation
- name: "🚀 K3s core installation"
  hosts: k3s_servers
  become: true
  gather_facts: true

  roles:
  - role: k3s
    tags: [ k3s ]

  - role: helm
    tags: [ helm ]

  post_tasks:
  - name: "✅ K3s installation completed"
    debug:
      msg: |
        🎉 K3s core installed successfully!

        📊 K3s Cluster:
        - Version: {{ k3s_version }}
        - Nodes: {{ groups['k3s_servers'] | length }}
        - API: https://{{ ansible_default_ipv4.address }}:6443

        🛠️  Tools installed:
        - kubectl (via k3s)
        - Helm {{ helm_version }}

        🔑 Kubeconfig: {{ k3s_config_file }}

        🚀 Ready for additional components!
