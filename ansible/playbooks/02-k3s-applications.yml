---
# Playbook pour l'installation des applications K3s
- name: "ğŸ—ï¸ Installation des applications K3s essentielles"
  hosts: k3s_servers
  become: true
  gather_facts: true

  roles:
  - role: ingress-nginx
    tags: [ ingress-nginx ]

  - role: cert-manager
    tags: [ cert-manager ]

  - role: external-dns
    tags: [ external-dns ]

  - role: applications
    tags: [ applications ]

  post_tasks:
  - name: "âœ… Applications K3s installÃ©es"
    debug:
      msg: |
        ğŸ‰ Applications K3s installÃ©es avec succÃ¨s!

        ğŸ“¦ Composants installÃ©s:
        - Ingress Nginx {{ ingress_nginx_version | default('latest') }}
        - Cert Manager {{ cert_manager_version | default('latest') }}
        - External DNS {{ external_dns_version | default('latest') }}

        ğŸŒ Applications dÃ©ployÃ©es:
        - Nginx Test: https://nginx.keltio.fr

        ğŸš€ Cluster prÃªt pour la production!
